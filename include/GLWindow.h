#ifndef GLWINDOW_H
#define GLWINDOW_H

//Qt
#include <QOpenGLWidget>
#include <QTimer>

// Project
#include "AbstractScene.h"


////////////////////////////////////////////////////////////////////////////////
/// @file GLWindow.h
/// @author Ramon Blanquer/ Carola Gille
/// @version 0.0.2
/// @class GLWindow
/// @brief Handles all the windowing related functionality and connects to the UI
///
/// Subclasses QOpenGLWindow which wraps all the functionality that allows
/// QWindow to render OpenGL graphics.
////////////////////////////////////////////////////////////////////////////////


// Note: I just left all your stuff and just added some things :)

class GLWindow : public QOpenGLWidget
{
  Q_OBJECT
public:
  GLWindow(QWidget *_parent);
  ~GLWindow();

  //////////////////////////////////////////////////////////////////////////////
  /// @brief Scene getter.
  //////////////////////////////////////////////////////////////////////////////
  AbstractScene* scene() const;

  //////////////////////////////////////////////////////////////////////////////
  /// @brief Scene setter.
  //////////////////////////////////////////////////////////////////////////////
  void setScene(AbstractScene *_scene);

protected :
  //////////////////////////////////////////////////////////////////////////////
  /// @brief Internally calls the Scene::initialize() of the bound Scene
  //////////////////////////////////////////////////////////////////////////////
  void initializeGL();

  //////////////////////////////////////////////////////////////////////////////
  /// @brief Internally calls the Scene::paint() of the bound Scene
  //////////////////////////////////////////////////////////////////////////////
  void paintGL();

  //////////////////////////////////////////////////////////////////////////////
  /// @brief Updates the Scene's Viewport accordingly to the new Window size
  //////////////////////////////////////////////////////////////////////////////
  void resizeGL(int _w, int _h);

  //////////////////////////////////////////////////////////////////////////////
  /// @brief Handle the key pressing events
  //////////////////////////////////////////////////////////////////////////////
  void keyPressEvent(QKeyEvent * ev);
private :
  //////////////////////////////////////////////////////////////////////////////
  /// @brief Scene associated with the Window
  //////////////////////////////////////////////////////////////////////////////
  AbstractScene *m_scene = nullptr;

  //////////////////////////////////////////////////////////////////////////////
  /// @brief QTimer clocks schedule updates for repainting the scene
  //////////////////////////////////////////////////////////////////////////////
  QTimer m_timer;


};

#endif // GLWINDOW_H
